import { User } from "./user"
import { Company } from "./company"
import { Event } from "./event"
import {WorkingGroup} from "./working-groups"

model Tag {
    id            Int                   @id @default(autoincrement())
    name          String                @unique
    color         String?
    createdAt     DateTime              @default(now())
    users         TagsOnUsers[]
    events        TagsOnEvents[]
    companies     TagsOnCompanies[]
    workingGroups TagsOnWorkingGroups[]
}

// /* -------------------------------------------------------------------------- */
// /*                           MANY TO MANY RELATIONS                           */
// /* -------------------------------------------------------------------------- */

model TagsOnUsers {
    tag        Tag      @relation(fields: [tagId], references: [id])
    tagId      Int // relation scalar field (used in the `@relation` attribute above)
    user       User     @relation(fields: [userId], references: [id])
    userId     Int // relation scalar field (used in the `@relation` attribute above)
    assignedAt DateTime @default(now())

    @@id([tagId, userId])
}

model TagsOnCompanies {
    tag        Tag      @relation(fields: [tagId], references: [id])
    tagId      Int // relation scalar field (used in the `@relation` attribute above)
    company    Company  @relation(fields: [companyId], references: [id])
    companyId  Int // relation scalar field (used in the `@relation` attribute above)
    assignedAt DateTime @default(now())

    @@id([tagId, companyId])
}

model TagsOnEvents {
    tag        Tag      @relation(fields: [tagId], references: [id])
    tagId      Int // relation scalar field (used in the `@relation` attribute above)
    event      Event    @relation(fields: [eventId], references: [id])
    eventId    Int // relation scalar field (used in the `@relation` attribute above)
    assignedAt DateTime @default(now())

    @@id([tagId, eventId])
}

model TagsOnWorkingGroups {
    tag            Tag          @relation(fields: [tagId], references: [id])
    tagId          Int // relation scalar field (used in the `@relation` attribute above)
    workingGroup   WorkingGroup @relation(fields: [workingGroupId], references: [id])
    workingGroupId Int // relation scalar field (used in the `@relation` attribute above)
    assignedAt     DateTime     @default(now())

    @@id([tagId, workingGroupId])
}
